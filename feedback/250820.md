# OpenEye_CCTV
- 시설물 관리 cctv에 opencv를 적용하여 시설물의 패턴에 이상이 감지되면 중앙관제실 모니터에 경고문을 띄워주는 시스템
## 발견한 문제
- 문제를 발견한 순간: 거주하고 있는 아파트 공동현관이 고장이나 며칠 째 문이 열려있었음. 문이 열려있다보니 둘째 아이가 뛰어 들어가다가 공동현관 자동문 프레임 모서리에 이마를 부딪혀 사고가 발생함.

- 이 문제에 집중한 이유: 이상이 있는 시설물이 제 때 파악이 되지 않아 고장이 방치되어 사고로 발생된 것이라고 생각함. 문이 열려있지 않았다면 아이가 뛰어 들어가지 않았을 것으로 예상되어 이상이 발생한 시설물이 제 때 감지되어 방치되는 상황을 줄일 수 있다면 입주민 안전을 더 확보할 수 있을 것이라고 예상되어 이 문제에 집중함.

- 문제가 발생한 상황: 사고 발생 후 CCTV를 통해 알게 된 것은 공동현관 자동문이 열린 후에 센서 문제로 15분 후에 닫히는 문제가 있었음. 경비원이 순찰을 돌지만 순찰 당시에 공동현관문이 닫혀있었으면 이상 징후를 발견하지 못할 가능성이 높아 방치되었다고 판단되었음. 

## 문제 해결 노력
- 처음 생각한 아이디어: 자동문의 경우 일정한 패턴이 있기 때문에 패턴을 벗어나게 되는 경우 미리 중앙관제실에 경고를 주게 되면 **명확한 고장 상태**가 아닌 **패턴에서 벗어나는 이상한 작동**을 파악할 수 있게 되면 내가 경험한 사고가 예방될 수 있겠다고 생각함.

- 실제로 만든 것: 벨브 모양과 유사한 usb 스틱을 opencv의 템플릿 매칭으로 실시간 감지하여 패턴 이상을 감지하는 것을 구현함.

- 이 방법을 선택한 이유: 시설관리 CCTV의 경우 앵글이 고정되어 있고 관리대상 시설물은 특정 패턴을 가지고 있기 때문에 그 룰을 벗어나는 상황만 감지하도록 하면 쉽게 구현이 될 것이라고 생각하여 템플릿 매칭을 선택함.
## 문제 해결 과정
- 가장 막현던 순간: 최초 **의자**로 패턴이상을 감지하는 것을 구현에 성공했는데 발견된 문제점은 의자와 매칭되는 관심영역에 다른 물체(사람이나 물건)이 들어오게 되면 패턴 이상으로 감지하는 문제가 있었음. 생각해보니 템플릿 매칭이라는 로직에서는 당연한 결과였음. 예를들어 아파트 공동현관의 경우 유동인구가 많고 입주민이 아닌 사람이 세대를 호출하는 과정에서 공동현관 앞에서 대기하는 상황 마다 패턴 이상이라고 감지하게 될 것으로 예상이 되는 문제에 막힘.

- 이 문제를 해결하기 위해서 기술적으로 좀 더 고민을 해야하는 상황. 시간 관계상 패턴 이상 감지의 대상을 사람이 이동하는 경로에 없는 시설물에 대해서 우선 구현을 시도해보는 것이 현실적인 구현 가능한 상황이라고 판단해서 우선적으로 고정적인 시설물의 패턴을 감지하는 수준으로 구현을 하기로 결정함.

- 도움 받은 도구: chatGPT로 코딩에 도움을 받음.

## 현재 결과
- 템플릿 매칭으로 실시간 감지 구현에 성공함. 한 앵글에 여러 시설물이 있을 경우에도 감지 테스트도 성공함.

- 동료들 반응: 시설관리 부분에 있어 굉장히 좋은 것 같다. 시설 관리 비용 절감, 순찰에만 의지해야 하는 시설관리, 장기간 고장이 방치되는 것을 방지 하는 등. 다만 구현하는 데에 많은 데이터셋이 필요해 보인다.

- 예상과 달랐던 점: 사람이 이동이 잦은 시설물의 경우 변수가 많다는 것.

## 앞으로..
- 더 하고 싶은 것: 최초 아이디어의 시작이 되었던 공동현관 패턴 이상 감지 시스템 구현
- 배운 점: 처음 예상한 것 보다 실제로 프로젝트에 들어갔을 때 맞닥들이는 변수와 문제점이 많다는 것을 알게됨.
- 다음에 비슷한 문제를 만나면 좀 더 변수와 문제를 예상하여 프로젝트에 접근해야겠음.

